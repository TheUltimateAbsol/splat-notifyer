<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Splat Notifyer</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Splat Notifyer Configuration</h1>

    <!-- Help Dropdown -->
    <details>
        <summary>Help</summary>
        <div id="help-content">
            <!-- Help content will be populated here -->
            <p>This form allows you to configure notifications for Splatoon 3 rotations.</p>
            <ul>
                <li>Enter your webhook URL and click "Check" to validate it.</li>
                <li>Once validated, you can add multiple notification rules.</li>
                <li>Each rule specifies match types, time slots, battle modes, and map preferences.</li>
                <li>Click "Add Another" to create additional notification rules.</li>
                <li>Finally, click "Submit" to save your configuration.</li>
            </ul>
        </div>
    </details>

    <br>

    <!-- Webhook URL Form -->
    <div class="form-section">
        <label for="webhook-url">Webhook URL:</label>
        <input type="url" id="webhook-url" name="webhookUrl" size="50"
               value="http://localhost:8080/webhook"
               aria-live="polite">
       <button type="button" id="check-webhook">Check</button>
        <span id="webhook-feedback"></span>
    </div>

    <!-- Second Form (dynamically shown after webhook submission) -->
    <!-- The hx-get will fetch data, and hx-on::after-request will call the JS function to populate the form -->
    <div id="main-form-container" class="hidden">
        <form id="config-form">
            <!-- Content will be populated by JavaScript -->
            <div id="notification-rules-container">
                <!-- Initial rule placeholder, will be replaced by JSON data -->
                <div class="form-section rule-section" id="rule-1">
                    <h3>Notification Rule #1 <button type="button" class="delete-rule-button" data-rule-id="1">Delete</button></h3>

                    <!-- User/Role Ping Syntax Dropdown -->
                    <details class="user-role-ping-syntax">
                        <summary>User/Role Ping Syntax</summary>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                    </details>
                    <br>

                    <!-- Notification Message -->
                    <label for="notificationMessage-1">Notification Message:</label>
                    <input type="text" id="notificationMessage-1" name="notificationMessage-1" size="50" required>
                    <br><br>

                    <!-- Match Type -->
                    <label>Match Type:</label>
                    <select name="matchType-1">
                        <option value="Open">Open</option>
                        <option value="Series">Series</option>
                        <option value="X-Battle">X-Battle</option>
                    </select>
                    <br><br>

                    <!-- Time Slots -->
                    <label>Time Slots (UTC):</label><br>
                    <div id="time-slots-1">
                        <!-- Time slots will be dynamically generated and converted to user's timezone -->
                    </div>
                    <br>

                    <!-- Battle Modes -->
                    <label>Battle Modes:</label><br>
                    <input type="checkbox" name="battleMode-1" value="VnNSdWxlLTE="> Splat Zones
                    <input type="checkbox" name="battleMode-1" value="VnNSdWxlLTI="> Tower Control
                    <input type="checkbox" name="battleMode-1" value="VnNSdWxlLTM="> Rainmaker
                    <input type="checkbox" name="battleMode-1" value="VnNSdWxlLTQ="> Clam Blitz
                    <br><br>

                    <!-- Map Selectors (dynamically added per battle mode) -->
                    <div id="map-selectors-container-1">
                        <!-- Map selector content will be generated by JS -->
                    </div>
                </div>
            </div>

            <button type="button" id="add-another-rule" class="add-another-button">+</button> Add Another
            <br><br>
            <button type="button" id="main-submit-button">Submit Configuration</button>
        </form>
    </div>

    <div id="response"></div>

    <script src="script.js"></script>
    <footer class="footer">
        <p>Data provided by splatoon3.ink. Not affiliated with Nintendo or Discord. Webhooks provide write-only access</p>
    </footer>
</body>
</html>